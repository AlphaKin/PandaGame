{"version":3,"sources":["block_base.js"],"names":["com","require","cc","Class","extends","Component","properties","parts","Prefab","audio","AudioClip","_isContacted","onBeginContact","contact","self","other","node","group","boom","part","instantiate","audioEngine","play","x","getComponent","y","MAP_OBJ","bp","find","addChild","setPosition","getPosition","destroy","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,MAAMC,QAAQ,QAAR,CAAV;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAOL,GAAGM,MADF;AAERC,eAAOP,GAAGQ,SAFF;AAGRC,sBAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlBQ,KAHP;;AAwBL;;AAEAC,kBA1BK,0BA0BUC,OA1BV,EA0BmBC,IA1BnB,EA0ByBC,KA1BzB,EA0B+B;AAChC;AACA;AACA,YAAG,KAAKJ,YAAL,IAAqBI,MAAMC,IAAN,CAAWC,KAAX,IAAoB,MAA5C,EAAmD;AAC/C,iBAAKC,IAAL;AACA,iBAAKP,YAAL,GAAoB,KAApB;AACH;AACJ,KAjCI;AAkCLO,QAlCK,kBAkCC;AACF,YAAIC,OAAOjB,GAAGkB,WAAH,CAAe,KAAKb,KAApB,CAAX;AACAL,WAAGmB,WAAH,CAAeC,IAAf,CAAoB,KAAKb,KAAzB,EAAgC,KAAhC,EAAuC,CAAvC;AACA,YAAIc,IAAI,KAAKP,IAAL,CAAUQ,YAAV,CAAuB,UAAvB,EAAmCD,CAA3C;AACA,YAAIE,IAAI,KAAKT,IAAL,CAAUQ,YAAV,CAAuB,UAAvB,EAAmCC,CAA3C;AACAzB,YAAI0B,OAAJ,CAAYH,CAAZ,EAAeE,CAAf,IAAoBN,IAApB;AACA,YAAIQ,KAAKR,KAAKK,YAAL,CAAkB,UAAlB,CAAT;AACAG,WAAGJ,CAAH,GAAO,KAAKP,IAAL,CAAUQ,YAAV,CAAuB,UAAvB,EAAmCD,CAA1C,CAA6CI,GAAGF,CAAH,GAAO,KAAKT,IAAL,CAAUQ,YAAV,CAAuB,UAAvB,EAAmCC,CAA1C;AAC7CvB,WAAG0B,IAAH,CAAQ,eAAR,EAAyBC,QAAzB,CAAkCV,IAAlC;AACAA,aAAKW,WAAL,CAAiB,KAAKd,IAAL,CAAUe,WAAV,EAAjB;AACA;AACA;AACA;AACA,aAAKf,IAAL,CAAUgB,OAAV;AACH,KAhDI;AAiDLC,SAjDK,mBAiDI,CACR;AAlDI;;AAoDL;AApDJ","file":"block_base.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\script\\blocks","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nvar com = require('common');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        parts: cc.Prefab,\n        audio: cc.AudioClip,\n        _isContacted: true\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onBeginContact(contact, self, other){\n        // let newBall = cc.instantiate(this.aim);\n        // this.ballParent.addChild(newBall);\n        if(this._isContacted && other.node.group == \"ball\"){\n            this.boom();\n            this._isContacted = false;\n        }\n    },\n    boom(){\n        let part = cc.instantiate(this.parts);\n        cc.audioEngine.play(this.audio, false, 1);\n        let x = this.node.getComponent(\"position\").x;\n        let y = this.node.getComponent(\"position\").y;\n        com.MAP_OBJ[x][y] = part;\n        let bp = part.getComponent(\"position\");\n        bp.x = this.node.getComponent(\"position\").x; bp.y = this.node.getComponent(\"position\").y;\n        cc.find(\"Canvas/blocks\").addChild(part);\n        part.setPosition(this.node.getPosition());\n        // part.angle = Math.random()*360 - 180;\n        // let rigidbody = part.getComponent(cc.RigidBody);\n        // rigidbody.linearVelocity = cc.v2(10, 10);\n        this.node.destroy();\n    },\n    start () {\n    },\n\n    // update (dt) {},\n});\n"]}