{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\HelloWorld.js"],"names":["cc","Class","extends","Component","properties","label","default","type","Label","ball","Node","pos_x","pos_y","setting_button","setting_box","Prefab","parent","broken_stone","onLoad","find","console","log","x","y","that","on","EventType","TOUCH_MOVE","event","delta","touch","getDelta","TOUCH_END","isOverlap","block_fragile","getComponent","boom","director","loadScene","global","node","instantiate","update","dt","a","b","b_l","width","b_r","b_t","height","b_b","s_l","s_r","s_t","s_b"],"mappings":";;;;;;AAAA;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAO;AACHC,qBAAS,IADN;AAEHC,kBAAMP,GAAGQ;AAFN,SADC;AAKRC,cAAM;AACFH,qBAAS,IADP;AAEFC,kBAAMP,GAAGU,IAFP;AAGFC,mBAAO,CAHL;AAIFC,mBAAO;AAJL,SALE;AAWRC,wBAAgB;AACZP,qBAAS,IADG;AAEZC,kBAAMP,GAAGU;AAFG,SAXR;AAeRI,qBAAa;AACTR,qBAAS,IADA;AAETC,kBAAMP,GAAGe;AAFA,SAfL;AAmBRC,gBAAQ;AACJV,qBAAS,IADL;AAEJC,kBAAMP,GAAGU;AAFL,SAnBA;AAuBRO,sBAAc;AACVX,qBAAS,IADC;AAEVC,kBAAMP,GAAGU;AAFC;AAId;AACA;AACA;AACA;AA9BQ,KAHP;;AAoCL;AACAQ,YAAQ,kBAAY;AAChB;AACA;AACA,aAAKT,IAAL,GAAYT,GAAGmB,IAAH,CAAQ,wBAAR,CAAZ;AACA,aAAKF,YAAL,GAAoBjB,GAAGmB,IAAH,CAAQ,gCAAR,CAApB;AACA,aAAKN,cAAL,GAAsBb,GAAGmB,IAAH,CAAQ,kCAAR,CAAtB;AACA;AACA;;AAEA;;AAEAC,gBAAQC,GAAR,CAAY,KAAKZ,IAAjB;AACA,aAAKA,IAAL,CAAUE,KAAV,GAAkB,KAAKF,IAAL,CAAUa,CAA5B;AACA,aAAKb,IAAL,CAAUG,KAAV,GAAkB,KAAKH,IAAL,CAAUc,CAA5B;AACA,YAAIC,OAAO,IAAX;;AAEA,aAAKf,IAAL,CAAUgB,EAAV,CAAazB,GAAGU,IAAH,CAAQgB,SAAR,CAAkBC,UAA/B,EAA2C,UAAUC,KAAV,EAAiB;AACxD,gBAAIC,QAAQD,MAAME,KAAN,CAAYC,QAAZ,EAAZ;AACAP,iBAAKf,IAAL,CAAUa,CAAV,IAAeO,MAAMP,CAArB;AACAE,iBAAKf,IAAL,CAAUc,CAAV,IAAeM,MAAMN,CAArB;AACH,SAJD;;AAMC,aAAKd,IAAL,CAAUgB,EAAV,CAAazB,GAAGU,IAAH,CAAQgB,SAAR,CAAkBM,SAA/B,EAA0C,UAAUJ,KAAV,EAAiB;AACxD,gBAAIJ,KAAKS,SAAL,CAAeT,KAAKf,IAApB,EAA0Be,KAAKP,YAA/B,CAAJ,EAAkD;AAC9C;AACAG,wBAAQC,GAAR,CAAY,MAAZ;AACA,oBAAIa,gBAAgBlC,GAAGmB,IAAH,CAAQ,gCAAR,EAA0CgB,YAA1C,CAAuD,eAAvD,CAApB;AACAD,8BAAcE,IAAd;AACApC,mBAAGqC,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH;AACD;AACAd,iBAAKf,IAAL,CAAUa,CAAV,GAAcE,KAAKf,IAAL,CAAUE,KAAxB;AACAa,iBAAKf,IAAL,CAAUc,CAAV,GAAcC,KAAKf,IAAL,CAAUG,KAAxB;AAEH,SAZA;AAaD,aAAKC,cAAL,CAAoBY,EAApB,CAAuBzB,GAAGU,IAAH,CAAQgB,SAAR,CAAkBM,SAAzC,EAAoD,UAAUJ,KAAV,EAAiB;AACjER,oBAAQC,GAAR,CAAY,OAAZ;AACA,gBAAG,CAACkB,eAAOzB,WAAX,EAAwB;AACpBM,wBAAQC,GAAR,CAAY,YAAZ;AACA,oBAAImB,OAAOxC,GAAGyC,WAAH,CAAejB,KAAKV,WAApB,CAAX;AACAyB,+BAAOzB,WAAP,GAAqB0B,IAArB;AACH;AACDD,2BAAOzB,WAAP,CAAmBE,MAAnB,GAA4BQ,KAAKR,MAAL,IAAeQ,KAAKgB,IAAhD;AACH,SARD;AASH,KAjFI;;AAmFL;AACAE,YAAQ,gBAAUC,EAAV,EAAc,CAErB,CAtFI;;AAwFL;AACAV,eAAW,mBAAUW,CAAV,EAAaC,CAAb,EAAgB;AACvB,YAAIC,MAAMF,EAAEtB,CAAF,GAAMsB,EAAEG,KAAF,GAAU,CAA1B;AACA,YAAIC,MAAMJ,EAAEtB,CAAF,GAAMsB,EAAEG,KAAF,GAAU,CAA1B;AACA,YAAIE,MAAML,EAAErB,CAAF,GAAMqB,EAAEM,MAAF,GAAW,CAA3B;AACA,YAAIC,MAAMP,EAAErB,CAAF,GAAMqB,EAAEM,MAAF,GAAW,CAA3B;AACA,YAAIE,MAAMP,EAAEvB,CAAF,GAAMuB,EAAEE,KAAF,GAAU,CAA1B;AACA,YAAIM,MAAMR,EAAEvB,CAAF,GAAMuB,EAAEE,KAAF,GAAU,CAA1B;AACA,YAAIO,MAAMT,EAAEtB,CAAF,GAAMsB,EAAEK,MAAF,GAAW,CAA3B;AACA,YAAIK,MAAMV,EAAEtB,CAAF,GAAMsB,EAAEK,MAAF,GAAW,CAA3B;AACA,eAAO,EAAEJ,MAAMO,GAAN,IAAaL,MAAMI,GAAnB,IAA0BH,MAAMM,GAAhC,IAAuCJ,MAAMG,GAA/C,CAAP;AACH;AAnGI,CAAT","file":"HelloWorld.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["import {\r\n    global\r\n} from './global'\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        label: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        ball: {\r\n            default: null,\r\n            type: cc.Node,\r\n            pos_x: 0,\r\n            pos_y: 0\r\n        },\r\n        setting_button: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        setting_box: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n        parent: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        broken_stone: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        // bgm: {\r\n        //     type: cc.AudioSource,\r\n        //     default: null\r\n        // }, \r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        // this.bgm = cc.find(\"Canvas/background/bgm\")\r\n        // console.log(this.bgm)\r\n        this.ball = cc.find(\"Canvas/background/ball\")\r\n        this.broken_stone = cc.find(\"Canvas/background/broken_stone\")\r\n        this.setting_button = cc.find(\"Canvas/background/setting_button\")\r\n        // this.bgm.volume = 0.1\r\n        // this.bgm.play()\r\n\r\n        // console.log(this.bgm)\r\n\r\n        console.log(this.ball)\r\n        this.ball.pos_x = this.ball.x\r\n        this.ball.pos_y = this.ball.y\r\n        var that = this\r\n\r\n        this.ball.on(cc.Node.EventType.TOUCH_MOVE, function (event) {\r\n            var delta = event.touch.getDelta()\r\n            that.ball.x += delta.x\r\n            that.ball.y += delta.y\r\n        })\r\n       \r\n         this.ball.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            if (that.isOverlap(that.ball, that.broken_stone)) {\r\n                // 如果重叠。击碎石块 开始游戏,\r\n                console.log(\"开始游戏\")\r\n                var block_fragile = cc.find(\"Canvas/background/broken_stone\").getComponent(\"block_fragile\")\r\n                block_fragile.boom();\r\n                cc.director.loadScene(\"Game\");\r\n            }\r\n            // 把ball放回原处\r\n            that.ball.x = that.ball.pos_x\r\n            that.ball.y = that.ball.pos_y\r\n\r\n        })\r\n        this.setting_button.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            console.log(\"点击了设置\");\r\n            if(!global.setting_box) {\r\n                console.log(\"实例化了prefab\")\r\n                let node = cc.instantiate(that.setting_box);\r\n                global.setting_box = node;  \r\n            }\r\n            global.setting_box.parent = that.parent || that.node\r\n        })\r\n    },\r\n\r\n    // called every frame\r\n    update: function (dt) {\r\n\r\n    },\r\n\r\n    // 判断两个节点是否重叠\r\n    isOverlap: function (a, b) {\r\n        var b_l = a.x - a.width / 2\r\n        var b_r = a.x + a.width / 2\r\n        var b_t = a.y + a.height / 2\r\n        var b_b = a.y - a.height / 2\r\n        var s_l = b.x - b.width / 2\r\n        var s_r = b.x + b.width / 2\r\n        var s_t = b.y + b.height / 2\r\n        var s_b = b.y - b.height / 2\r\n        return !(b_l > s_r || b_r < s_l || b_t < s_b || b_b > s_t)\r\n    }\r\n});\r\n"]}